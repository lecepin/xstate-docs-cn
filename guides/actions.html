<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Actions | XState Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://plausible.io/js/plausible.js" defer="defer"></script>
    <meta name="description" content="Documentation for XState: State Machines and Statecharts for the Modern Web">
    
    <link rel="preload" href="/xstate-docs-cn/assets/css/0.styles.f588b78e.css" as="style"><link rel="preload" href="/xstate-docs-cn/assets/js/app.7894ad5b.js" as="script"><link rel="preload" href="/xstate-docs-cn/assets/js/3.224f3587.js" as="script"><link rel="preload" href="/xstate-docs-cn/assets/js/9.4fb7b0c1.js" as="script"><link rel="preload" href="/xstate-docs-cn/assets/js/26.b97ecd3d.js" as="script"><link rel="preload" href="/xstate-docs-cn/assets/js/10.ea2a939d.js" as="script"><link rel="prefetch" href="/xstate-docs-cn/assets/js/100.705e4e82.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/101.18a4fc05.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/102.4d52d6ed.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/103.8ae0614c.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/104.3c188db5.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/105.26e97d50.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/106.c219d428.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/107.d1758b38.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/108.f09ca461.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/109.cba4e40f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/11.85057b71.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/110.cb328d8a.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/111.e0f69f5d.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/112.53bfdae5.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/113.4c871ace.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/114.d7cf4af7.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/115.2a60757e.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/116.d8d4fed1.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/117.99e55c3c.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/118.bc84dfea.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/119.6a8a2a9f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/12.9d8fd707.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/120.d7b62301.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/121.baef4f0d.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/122.888bd0da.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/123.53589a2a.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/124.1ccddd8a.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/125.0f7391d3.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/126.5c9e39c8.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/127.2f51fe92.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/128.1a99c520.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/129.1e95a555.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/13.99a54259.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/130.ad717952.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/131.62a220aa.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/132.d14add01.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/133.7f510b24.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/134.55f40718.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/135.58ffb76f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/136.a401b13a.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/137.ee889085.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/138.4b05e1e0.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/139.6b410487.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/14.70e2aa69.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/140.2a553177.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/141.67da385b.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/142.549a52bb.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/143.b08cf488.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/144.0b252ac5.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/145.b7e88ee7.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/146.c0affbdd.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/147.71573565.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/148.6027da1e.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/149.6c4f67db.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/15.475c0040.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/16.50969bd6.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/17.c1cc2d06.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/18.d49e50ff.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/19.af6fc93f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/20.4043c089.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/21.af9832cf.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/22.636a2d04.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/23.9670b93d.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/24.93a61e75.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/25.63a9b975.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/27.ae8c6d09.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/28.e6ed8ce6.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/29.34f80608.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/30.5320606d.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/31.352d87a6.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/32.7c3b7b6a.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/33.a5b46f90.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/34.d3b1f5ef.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/35.2a28eba1.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/36.825ce864.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/37.65f373a7.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/38.1876537f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/39.59f942b2.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/4.441c3300.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/40.788fbfe3.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/41.e75ca493.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/42.7726b0b7.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/43.97187c20.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/44.c5586522.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/45.967fcb34.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/46.b9a297b0.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/47.f84a37a0.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/48.5050f4fa.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/49.13eb1e59.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/5.ced113fa.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/50.0be55672.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/51.2016b366.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/52.fb281a5b.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/53.fa78f410.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/54.e7c2d18f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/55.7873b958.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/56.bf99c6b2.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/57.49f1a7f9.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/58.b0c74505.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/59.8db02c95.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/6.c3b971ab.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/60.ebaed618.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/61.2e066bac.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/62.68cf3073.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/63.f60dd4f7.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/64.a6359e02.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/65.4ab67d16.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/66.96c0e208.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/67.d808de8f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/68.ec3b24fd.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/69.b9a69d44.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/7.251a6135.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/70.68fdbf0c.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/71.dc535b6a.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/72.99d9bc71.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/73.94d108be.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/74.da74265b.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/75.33e568de.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/76.977e3625.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/77.803c84df.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/78.aeaa4e79.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/79.d038bee1.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/8.1ad303d0.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/80.3056e07c.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/81.400c3d6f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/82.6b1ab787.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/83.6e8c1c15.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/84.814877be.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/85.899f3f76.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/86.6a0f1a21.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/87.eaed768b.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/88.e6d115cb.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/89.700b3956.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/90.8fd1ca67.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/91.9877f087.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/92.c04e15ea.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/93.5f45e0d0.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/94.293caaad.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/95.28d34b52.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/96.dc1e204e.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/97.c588ff1f.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/98.37a0afad.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/99.b6990c2c.js"><link rel="prefetch" href="/xstate-docs-cn/assets/js/vendors~docsearch.8fe964ae.js">
    <link rel="stylesheet" href="/xstate-docs-cn/assets/css/0.styles.f588b78e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xstate-docs-cn/" class="home-link router-link-active"><img src="/xstate-docs-cn/logo.svg" alt="XState Docs" class="logo"> <span class="site-name can-hide">XState Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://paka.dev/npm/xstate/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://stately.ai/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Visualizer
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/xtWgFTgvNV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/statelyai/xstate/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xstate-docs-cn/guides/actions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/xstate-docs-cn/zh/guides/actions.html" class="nav-link">
  ÁÆÄ‰Ωì‰∏≠Êñá
</a></li></ul></div></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://paka.dev/npm/xstate/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://stately.ai/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Visualizer
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/xtWgFTgvNV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/statelyai/xstate/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xstate-docs-cn/guides/actions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/xstate-docs-cn/zh/guides/actions.html" class="nav-link">
  ÁÆÄ‰Ωì‰∏≠Êñá
</a></li></ul></div></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>What is XState?</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guides</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstate-docs-cn/guides/start.html" class="sidebar-link">Getting Started</a></li><li><a href="/xstate-docs-cn/guides/installation.html" class="sidebar-link">Installation</a></li><li><a href="/xstate-docs-cn/guides/introduction-to-state-machines-and-statecharts/" class="sidebar-link">Introduction to state machines and statecharts</a></li><li><a href="/xstate-docs-cn/guides/machines.html" class="sidebar-link">Machines</a></li><li><a href="/xstate-docs-cn/guides/states.html" class="sidebar-link">States</a></li><li><a href="/xstate-docs-cn/guides/statenodes.html" class="sidebar-link">State Nodes</a></li><li><a href="/xstate-docs-cn/guides/events.html" class="sidebar-link">Events</a></li><li><a href="/xstate-docs-cn/guides/transitions.html" class="sidebar-link">Transitions</a></li><li><a href="/xstate-docs-cn/guides/hierarchical.html" class="sidebar-link">Hierarchical state nodes</a></li><li><a href="/xstate-docs-cn/guides/parallel.html" class="sidebar-link">Parallel State Nodes</a></li><li><a href="/xstate-docs-cn/guides/final.html" class="sidebar-link">Final states</a></li><li><a href="/xstate-docs-cn/guides/effects.html" class="sidebar-link">Effects</a></li><li><a href="/xstate-docs-cn/guides/actions.html" aria-current="page" class="active sidebar-link">Actions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#declarative-actions" class="sidebar-link">Declarative actions</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#action-order" class="sidebar-link">Action order</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#send-action" class="sidebar-link">Send action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#raise-action" class="sidebar-link">Raise action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#respond-action" class="sidebar-link">Respond action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#forwardto-action" class="sidebar-link">forwardTo action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#escalate-action" class="sidebar-link">Escalate action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#log-action" class="sidebar-link">Log action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#choose-action" class="sidebar-link">Choose action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#pure-action" class="sidebar-link">Pure action</a></li><li class="sidebar-sub-header"><a href="/xstate-docs-cn/guides/actions.html#actions-on-self-transitions" class="sidebar-link">Actions on self-transitions</a></li></ul></li><li><a href="/xstate-docs-cn/guides/guards.html" class="sidebar-link">Guarded Transitions</a></li><li><a href="/xstate-docs-cn/guides/context.html" class="sidebar-link">Context</a></li><li><a href="/xstate-docs-cn/guides/models.html" class="sidebar-link">Models</a></li><li><a href="/xstate-docs-cn/guides/activities.html" class="sidebar-link">Activities</a></li><li><a href="/xstate-docs-cn/guides/communication.html" class="sidebar-link">Invoking Services</a></li><li><a href="/xstate-docs-cn/guides/actors.html" class="sidebar-link">Actors</a></li><li><a href="/xstate-docs-cn/guides/delays.html" class="sidebar-link">Delayed events and transitions</a></li><li><a href="/xstate-docs-cn/guides/history.html" class="sidebar-link">History</a></li><li><a href="/xstate-docs-cn/guides/ids.html" class="sidebar-link">Identifying State Nodes</a></li><li><a href="/xstate-docs-cn/guides/interpretation.html" class="sidebar-link">Interpreting Machines</a></li><li><a href="/xstate-docs-cn/guides/testing.html" class="sidebar-link">Testing Machines</a></li><li><a href="/xstate-docs-cn/guides/typescript.html" class="sidebar-link">Using TypeScript</a></li><li><a href="/xstate-docs-cn/guides/scxml.html" class="sidebar-link">SCXML</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Recipes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Packages</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Examples</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>News and Useful Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h1> <p>Actions are fire-and-forget <a href="/xstate-docs-cn/guides/effects.html">effects</a>. They can be declared in three ways:</p> <ul><li><code>entry</code> actions are executed upon entering a state</li> <li><code>exit</code> actions are executed upon exiting a state</li> <li>transition actions are executed when a transition is taken</li></ul> <p>To learn more, read about <a href="/xstate-docs-cn/guides/introduction-to-state-machines-and-statecharts/#actions">actions in our introduction to statecharts</a>.</p> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>Actions can be added like so:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br><br><br><br><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> triggerMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'trigger'</span><span class="token punctuation">,</span>
    initial<span class="token operator">:</span> <span class="token string">'inactive'</span><span class="token punctuation">,</span>
    states<span class="token operator">:</span> <span class="token punctuation">{</span>
      inactive<span class="token operator">:</span> <span class="token punctuation">{</span>
        on<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token constant">TRIGGER</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            target<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
            <span class="token comment">// transition actions</span>
            actions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token string">'sendTelemetry'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      active<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// entry actions</span>
        entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'notifyActive'</span><span class="token punctuation">,</span> <span class="token string">'sendTelemetry'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// exit actions</span>
        exit<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'notifyInactive'</span><span class="token punctuation">,</span> <span class="token string">'sendTelemetry'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        on<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token constant">STOP</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'inactive'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// action implementations</span>
      <span class="token function-variable function">activate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'activating...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">notifyActive</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'active!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">notifyInactive</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inactive!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">sendTelemetry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'time:'</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><details><summary>
    When should I use transition vs. entry/exit actions?
  </summary> <p>It depends! They mean different things:</p> <ul><li>An entry/exit action means ‚Äúexecute this action <strong>on any transition that enters/exits this state</strong>‚Äù. Use entry/exit actions when the action is only dependent on the state node that it‚Äôs in, and not on previous/next state nodes or events.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token punctuation">{</span>
  idle<span class="token operator">:</span> <span class="token punctuation">{</span>
    on<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token constant">LOAD</span><span class="token operator">:</span> <span class="token string">'loading'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  loading<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// this action is executed whenever the 'loading' state is entered</span>
    entry<span class="token operator">:</span> <span class="token string">'fetchData'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><ul><li>A transition action means ‚Äúexecute this action <strong>only on this transition</strong>‚Äù. Use transition actions when the action is dependent on the event and the state node that it is currently in.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token punctuation">{</span>
  idle<span class="token operator">:</span> <span class="token punctuation">{</span>
    on<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token constant">LOAD</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">'loading'</span><span class="token punctuation">,</span>
        <span class="token comment">// this action is executed only on this transition</span>
        actions<span class="token operator">:</span> <span class="token string">'fetchData'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  loading<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div></details> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Action implementations can be quickly prototyped by specifying the action function directly in the machine config:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">¬†</div><br><br><br></div><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token constant">TRIGGER</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  target<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">actions</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'activating...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><p>Refactoring inline action implementations in the <code>actions</code> property of the machine options makes it easier to debug, serialize, test, and accurately visualize actions.</p></div> <h2 id="declarative-actions"><a href="#declarative-actions" class="header-anchor">#</a> Declarative actions</h2> <p>The <code>State</code> instance returned from <code>machine.transition(...)</code> has an <code>.actions</code> property, which is an array of action objects for the interpreter to execute:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br></div><pre class="language-js"><code><span class="token keyword">const</span> activeState <span class="token operator">=</span> triggerMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'inactive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'TRIGGER'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>activeState<span class="token punctuation">.</span>actions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">//   { type: 'activate', exec: ... },</span>
<span class="token comment">//   { type: 'sendTelemetry', exec: ... },</span>
<span class="token comment">//   { type: 'notifyActive', exec: ... },</span>
<span class="token comment">//   { type: 'sendTelemetry', exec: ... }</span>
<span class="token comment">// ]</span>
</code></pre></div><p>Each action object has two properties (and others, that you can specify):</p> <ul><li><code>type</code> - the action type</li> <li><code>exec</code> - the action implementation function</li></ul> <p>The <code>exec</code> function takes three arguments:</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>context</code></td> <td>TContext</td> <td>The current machine context</td></tr> <tr><td><code>event</code></td> <td>event object</td> <td>The event that caused the transition</td></tr> <tr><td><code>actionMeta</code></td> <td>meta object</td> <td>An object containing meta data about the action (see below)</td></tr></tbody></table> <p>The <code>actionMeta</code> object includes the following properties:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>action</code></td> <td>action object</td> <td>The original action object</td></tr> <tr><td><code>state</code></td> <td>State</td> <td>The resolved machine state, after transition</td></tr></tbody></table> <p>The interpreter will call the <code>exec</code> function with the <code>currentState.context</code>, the <code>event</code>, and the <code>state</code> that the machine transitioned to. You can customize this behavior. Read <a href="/xstate-docs-cn/guides/interpretation.html#executing-actions">executing actions</a> for more details.</p> <h2 id="action-order"><a href="#action-order" class="header-anchor">#</a> Action order</h2> <p>When interpreting statecharts, the order of actions should not necessarily matter (that is, they should not be dependent on each other). However, the order of the actions in the <code>state.actions</code> array is:</p> <ol><li><code>exit</code> actions - all the exit actions of the exited state node(s), from the atomic state node up</li> <li>transition <code>actions</code> - all actions defined on the chosen transition</li> <li><code>entry</code> actions - all the entry actions of the entered state node(s), from the parent state down</li></ol> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In XState version 4.x, <code>assign</code> actions have priority and are executed before any other actions. This behavior will be fixed in version 5, as the <code>assign</code> actions will be called in order.</p></div> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>All action creators documented here return <strong>action objects</strong>; it is a pure function that only returns an action object and does <em>not</em> imperatively send an event. Do not imperatively call action creators; they will do nothing!</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// üö´ Do not do this!</span>
<span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// üö´ This will do nothing; send() is not an imperative function!</span>
  <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; { type: 'xstate.send', event: { type: 'SOME_EVENT' } }</span>

<span class="token comment">// ‚úÖ Do this instead</span>
entry<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="send-action"><a href="#send-action" class="header-anchor">#</a> Send action</h2> <p>The <code>send(event)</code> action creator creates a special ‚Äúsend‚Äù action object that tells a service (i.e., <a href="/xstate-docs-cn/guides/interpretation.html">interpreted machine</a>) to send that event to itself. It queues an event to the running service, in the external event queue, which means the event is sent on the next ‚Äústep‚Äù of the interpreter.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>event</code></td> <td>string or event object or event expression</td> <td>The event to send to the specified <code>options.to</code> (or self)</td></tr> <tr><td><code>options?</code></td> <td>send options (see below)</td> <td>Options for sending the event.</td></tr></tbody></table> <p>The send <code>options</code> argument is an object containing:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>id?</code></td> <td>string</td> <td>The send ID (used for cancellation)</td></tr> <tr><td><code>to?</code></td> <td>string</td> <td>The target of the event (defaults to self)</td></tr> <tr><td><code>delay?</code></td> <td>number</td> <td>The timeout (milliseconds) before sending the event, if the event is not canceled before the timeout</td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>send(...)</code> function is an <strong>action creator</strong>; it is a pure function that only returns an action object and does <em>not</em> imperatively send an event.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> send <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> lazyStubbornMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'stubborn'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'inactive'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    inactive<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TOGGLE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
          <span class="token comment">// send the TOGGLE event again to the service</span>
          actions<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'TOGGLE'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TOGGLE</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'inactive'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nextState <span class="token operator">=</span> lazyStubbornMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'inactive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'TOGGLE'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nextState<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'active'</span>
nextState<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// =&gt; [{ type: 'xstate.send', event: { type: 'TOGGLE' }}]</span>

<span class="token comment">// The service will proceed to send itself the { type: 'TOGGLE' } event.</span>
</code></pre></div><p>The <code>event</code> argument passed to <code>send(event)</code> can be:</p> <ul><li>A string event, e.g., <code>send('TOGGLE')</code></li> <li>An event object, e.g., <code>send({ type: 'TOGGLE', payload: ... })</code></li> <li>An event expression, which is a function that takes in the current <code>context</code> and <code>event</code> that triggered the <code>send()</code> action, and returns an event object:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> send <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token comment">// contrived example - reads from the `context` and sends</span>
<span class="token comment">// the dynamically created event</span>
<span class="token keyword">const</span> sendName <span class="token operator">=</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'NAME'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> context<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> machine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  on<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">TOGGLE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      actions<span class="token operator">:</span> sendName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="send-targets"><a href="#send-targets" class="header-anchor">#</a> Send targets</h3> <p>An event sent from a <code>send(...)</code> action creator can signify that it should be sent to specific targets, such as <a href="/xstate-docs-cn/guides/communication.html">invoked services</a> or <a href="/xstate-docs-cn/guides/actors.html">spawned actors</a>. This is done by specifying the <code>{ to: ... }</code> property in the <code>send(...)</code> action:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'some-service-id'</span><span class="token punctuation">,</span>
  src<span class="token operator">:</span> <span class="token string">'someService'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
<span class="token comment">// Indicates to send { type: 'SOME_EVENT' } to the invoked service</span>
actions<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> <span class="token string">'some-service-id'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>The target in the <code>to</code> prop can also be a <strong>target expression</strong>, which is a function that takes in the current <code>context</code> and <code>event</code> that triggered the action, and returns either a string target or an <a href="/xstate-docs-cn/guides/actors.html#spawning-actors">actor reference</a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>entry<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">someActor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span>someMachine<span class="token punctuation">,</span> <span class="token string">'some-actor-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// Send { type: 'SOME_EVENT' } to the actor ref</span>
  <span class="token punctuation">{</span>
    actions<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token function-variable function">to</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> context<span class="token punctuation">.</span>someActor
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Again, the <code>send(...)</code> function is an action creator and <strong>will not imperatively send an event.</strong> Instead, it returns an action object that describes where the event will be sent to:</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> <span class="token string">'child'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// logs:</span>
<span class="token comment">// {</span>
<span class="token comment">//   type: 'xstate.send',</span>
<span class="token comment">//   to: 'child',</span>
<span class="token comment">//   event: {</span>
<span class="token comment">//     type: 'SOME_EVENT'</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div></div> <p>To send from a child machine to a parent machine, use <code>sendParent(event)</code> (takes the same arguments as <code>send(...)</code>).</p> <h2 id="raise-action"><a href="#raise-action" class="header-anchor">#</a> Raise action</h2> <p>The <code>raise()</code> action creator queues an event to the statechart, in the internal event queue. This means the event is sent immediately on the current ‚Äústep‚Äù of the interpreter.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>event</code></td> <td>string or event object</td> <td>The event to raise.</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> raise <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> raiseActionDemo <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'raisedmo'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'entry'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">STEP</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'middle'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token constant">RAISE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'middle'</span><span class="token punctuation">,</span>
          <span class="token comment">// immediately invoke the NEXT event for 'middle'</span>
          actions<span class="token operator">:</span> <span class="token function">raise</span><span class="token punctuation">(</span><span class="token string">'NEXT'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    middle<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">NEXT</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'last'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    last<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">RESET</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'entry'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Click on both <code>STEP</code> and <code>RAISE</code> events in the <a href="https://stately.ai/viz?gist=fd763ff2c161b172f719891e2544d428" target="_blank" rel="noopener noreferrer">visualizer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to see the difference.</p> <h2 id="respond-action"><a href="#respond-action" class="header-anchor">#</a> Respond action <span class="badge tip" style="vertical-align:top;" data-v-c3de242e>4.7+</span></h2> <p>The <code>respond()</code> action creator creates a <a href="#send-action"><code>send()</code> action</a> that is sent to the service that sent the event which triggered the response.</p> <p>This uses <a href="/xstate-docs-cn/guides/scxml.html#events">SCXML events</a> internally to get the <code>origin</code> from the event and set the <code>to</code> of the <code>send()</code> action to the <code>origin</code>.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>event</code></td> <td>string, event object, or send expression</td> <td>The event to send back to the sender</td></tr> <tr><td><code>options?</code></td> <td>send options object</td> <td>Options to pass into the <code>send()</code> event</td></tr></tbody></table> <h3 id="example-using-respond-action"><a href="#example-using-respond-action" class="header-anchor">#</a> Example using respond action</h3> <p>This demonstrates some parent service (<code>authClientMachine</code>) sending a <code>'CODE'</code> event to the invoked <code>authServerMachine</code>, and the <code>authServerMachine</code> responding with a <code>'TOKEN'</code> event.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> authServerMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  initial<span class="token operator">:</span> <span class="token string">'waitingForCode'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    waitingForCode<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">CODE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          actions<span class="token operator">:</span> <span class="token function">respond</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'TOKEN'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> delay<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> authClientMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  initial<span class="token operator">:</span> <span class="token string">'idle'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    idle<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">AUTH</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'authorizing'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    authorizing<span class="token operator">:</span> <span class="token punctuation">{</span>
      invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'auth-server'</span><span class="token punctuation">,</span>
        src<span class="token operator">:</span> authServerMachine
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      entry<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'CODE'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> <span class="token string">'auth-server'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TOKEN</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'authorized'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    authorized<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'final'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>See <a href="/xstate-docs-cn/guides/actors.html#sending-responses">üìñ Sending Responses</a> for more details.</p> <h2 id="forwardto-action"><a href="#forwardto-action" class="header-anchor">#</a> forwardTo action <span class="badge tip" style="vertical-align:top;" data-v-c3de242e>4.7+</span></h2> <p>The <code>forwardTo()</code> action creator creates a <a href="#send-action"><code>send()</code> action</a> that forwards the most recent event to the specified service via its ID.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>target</code></td> <td>string or function that returns service</td> <td>The target service to send the most recent event to.</td></tr></tbody></table> <h3 id="example-using-forwardto-action"><a href="#example-using-forwardto-action" class="header-anchor">#</a> Example using forwardTo action</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> forwardTo<span class="token punctuation">,</span> interpret <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">alertService</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> receive</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ALERT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> parentMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'parent'</span><span class="token punctuation">,</span>
  invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'alerter'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">src</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> alertService
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">ALERT</span><span class="token operator">:</span> <span class="token punctuation">{</span> actions<span class="token operator">:</span> <span class="token function">forwardTo</span><span class="token punctuation">(</span><span class="token string">'alerter'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> parentService <span class="token operator">=</span> <span class="token function">interpret</span><span class="token punctuation">(</span>parentMachine<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parentService<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'ALERT'</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'hello world'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; alerts &quot;hello world&quot;</span>
</code></pre></div><h2 id="escalate-action"><a href="#escalate-action" class="header-anchor">#</a> Escalate action <span class="badge tip" style="vertical-align:top;" data-v-c3de242e>4.7+</span></h2> <p>The <code>escalate()</code> action creator escalates an error by sending it to the parent machine. This is sent as a special error event that is recognized by the machine.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>errorData</code></td> <td>any</td> <td>The error data to escalate (send) to the parent.</td></tr></tbody></table> <h3 id="example-using-escalate-action"><a href="#example-using-escalate-action" class="header-anchor">#</a> Example using escalate action</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> escalate <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> childMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// This will be sent to the parent machine that invokes this child</span>
  entry<span class="token operator">:</span> <span class="token function">escalate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'This is some error'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> parentMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
    src<span class="token operator">:</span> childMachine<span class="token punctuation">,</span>
    onError<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">actions</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//  {</span>
        <span class="token comment">//    type: ...,</span>
        <span class="token comment">//    data: {</span>
        <span class="token comment">//      message: 'This is some error'</span>
        <span class="token comment">//    }</span>
        <span class="token comment">//  }</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="log-action"><a href="#log-action" class="header-anchor">#</a> Log action</h2> <p>The <code>log()</code> action creator is a declarative way of logging anything related to the current state <code>context</code> and/or <code>event</code>. It takes two optional arguments:</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>expr?</code></td> <td>string or function</td> <td>A plain string or a function that takes the <code>context</code> and <code>event</code> as arguments and returns a value to be logged</td></tr> <tr><td><code>label?</code></td> <td>string</td> <td>A string to label the logged message</td></tr></tbody></table> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">¬†</div><br><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br><br><br><br><br><br><br><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> loggingMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'logging'</span><span class="token punctuation">,</span>
  context<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    start<span class="token operator">:</span> <span class="token punctuation">{</span>
      entry<span class="token operator">:</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'started!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">FINISH</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'end'</span><span class="token punctuation">,</span>
          actions<span class="token operator">:</span> <span class="token function">log</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>context<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, event: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>event<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">'Finish label'</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    end<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> endState <span class="token operator">=</span> loggingMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token string">'FINISH'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

endState<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">//   {</span>
<span class="token comment">//     type: 'xstate.log',</span>
<span class="token comment">//     label: 'Finish label',</span>
<span class="token comment">//     expr: (context, event) =&gt; ...</span>
<span class="token comment">//   }</span>
<span class="token comment">// ]</span>

<span class="token comment">// The interpreter would log the action's evaluated expression</span>
<span class="token comment">// based on the current state context and event.</span>
</code></pre></div><p>Without any arguments, <code>log()</code> is an action that logs an object with <code>context</code> and <code>event</code> properties, containing the current context and triggering event, respectively.</p> <h2 id="choose-action"><a href="#choose-action" class="header-anchor">#</a> Choose action</h2> <p>The <code>choose()</code> action creator creates an action that specifies which actions should be executed based on some conditions.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>conds</code></td> <td>array</td> <td>An array of objects containing the <code>actions</code> to execute when the given <code>cond</code> is true (see below)</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p>A special <code>&quot;xstate.choose&quot;</code> action object that is internally evaluated to conditionally determine which action objects should be executed.</p> <p>Each &quot;conditional actions&quot; object in <code>cond</code> has these properties:</p> <ul><li><code>actions</code> - the action objects to execute</li> <li><code>cond?</code> - the condition for executing those <code>actions</code></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Do not use the <code>choose()</code> action creator to execute actions that can otherwise be represented as non-conditional actions executed in certain states/transitions via <code>entry</code>, <code>exit</code>, or <code>actions</code>.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> choose<span class="token punctuation">,</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> maybeDoThese <span class="token operator">=</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    cond<span class="token operator">:</span> <span class="token string">'cond1'</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// selected when &quot;cond1&quot; is true</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cond1 chosen!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    cond<span class="token operator">:</span> <span class="token string">'cond2'</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// selected when &quot;cond1&quot; is false and &quot;cond2&quot; is true</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">/* ... */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'another action'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">cond</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// some condition</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// selected when &quot;cond1&quot; and &quot;cond2&quot; are false and the inline `cond` is true</span>
      <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// some other action</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fall-through action'</span><span class="token punctuation">)</span>
      <span class="token comment">// selected when &quot;cond1&quot;, &quot;cond2&quot;, and &quot;cond3&quot; are false</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is analogous to the SCXML <code>&lt;if&gt;</code>, <code>&lt;elseif&gt;</code>, and <code>&lt;else&gt;</code> elements: <a href="https://www.w3.org/TR/scxml/#if" target="_blank" rel="noopener noreferrer">www.w3.org/TR/scxml/#if<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="pure-action"><a href="#pure-action" class="header-anchor">#</a> Pure action</h2> <p>The <code>pure()</code> action creator is a pure function (hence the name) that returns the action object(s) to be executed based on the current state <code>context</code> and <code>event</code> that triggered the action. This allows you to dynamically define which actions should be executed.</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>getActions</code></td> <td>function</td> <td>A function that returns the action object(s) to be executed based on the given <code>context</code> and <code>event</code> (see below)</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p>A special <code>&quot;xstate.pure&quot;</code> action object that will internally evaluate the <code>get</code> property to determine the action objects that should be executed.</p> <p>Arguments for <code>getActions(context, event)</code>:</p> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>context</code></td> <td>object</td> <td>The current state <code>context</code></td></tr> <tr><td><code>event</code></td> <td>event object</td> <td>The event object that triggered the actions</td></tr></tbody></table> <p><strong>Returns:</strong></p> <p>A single action object, an array of action objects, or <code>undefined</code> that represents no action objects.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> pure <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token comment">// Dynamically send an event to every invoked sample actor</span>
<span class="token keyword">const</span> sendToAllSampleActors <span class="token operator">=</span> <span class="token function">pure</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> context<span class="token punctuation">.</span>sampleActors<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sampleActor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'SOME_EVENT'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> sampleActor <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; {</span>
<span class="token comment">//   type: ActionTypes.Pure,</span>
<span class="token comment">//   get: () =&gt; ... // evaluates to array of send() actions</span>
<span class="token comment">// }</span>

<span class="token keyword">const</span> machine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    active<span class="token operator">:</span> <span class="token punctuation">{</span>
      entry<span class="token operator">:</span> sendToAllSampleActors
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="actions-on-self-transitions"><a href="#actions-on-self-transitions" class="header-anchor">#</a> Actions on self-transitions</h2> <p>A <a href="/xstate-docs-cn/guides/transitions.html#self-transitions">self-transition</a> is when a state transitions to itself, in which it <em>may</em> exit and then reenter itself. Self-transitions can either be an <strong>internal</strong> or <strong>external</strong> transition:</p> <ul><li>An internal transition will <em>not</em> exit and reenter itself, so the state node's <code>entry</code> and <code>exit</code> actions will not be executed again.
<ul><li>Internal transitions are indicated with <code>{ internal: true }</code>, or by leaving the <code>target</code> as <code>undefined</code>.</li> <li>Actions defined on the transition's <code>actions</code> property will be executed.</li></ul></li> <li>An external transition <em>will</em> exit and reenter itself, so the state node's <code>entry</code> and <code>exit</code> actions will be executed again.
<ul><li>All transitions are external by default. To be explicit, you can indicate them with <code>{ internal: false }</code>.</li> <li>Actions defined on the transition's <code>actions</code> property will be executed.</li></ul></li></ul> <p>For example, this counter machine has one <code>'counting'</code> state with internal and external transitions:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><div class="highlighted">¬†</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> counterMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'counter'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'counting'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    counting<span class="token operator">:</span> <span class="token punctuation">{</span>
      entry<span class="token operator">:</span> <span class="token string">'enterCounting'</span><span class="token punctuation">,</span>
      exit<span class="token operator">:</span> <span class="token string">'exitCounting'</span><span class="token punctuation">,</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// self-transitions</span>
        <span class="token constant">INC</span><span class="token operator">:</span> <span class="token punctuation">{</span> actions<span class="token operator">:</span> <span class="token string">'increment'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// internal (implicit)</span>
        <span class="token constant">DEC</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'counting'</span><span class="token punctuation">,</span> actions<span class="token operator">:</span> <span class="token string">'decrement'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// external</span>
        <span class="token constant">DO_NOTHING</span><span class="token operator">:</span> <span class="token punctuation">{</span> internal<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> actions<span class="token operator">:</span> <span class="token string">'logNothing'</span> <span class="token punctuation">}</span> <span class="token comment">// internal (explicit)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// External transition (exit + transition actions + entry)</span>
<span class="token keyword">const</span> stateA <span class="token operator">=</span> counterMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'counting'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'DEC'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stateA<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// ['exitCounting', 'decrement', 'enterCounting']</span>

<span class="token comment">// Internal transition (transition actions)</span>
<span class="token keyword">const</span> stateB <span class="token operator">=</span> counterMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'counting'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'DO_NOTHING'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stateB<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// ['logNothing']</span>

<span class="token keyword">const</span> stateC <span class="token operator">=</span> counterMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'counting'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'INC'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stateB<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// ['increment']</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/davidkpiano/xstate/edit/main/docs/guides/actions.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/13/2021, 11:00:34 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/xstate-docs-cn/guides/effects.html" class="prev">
        Effects
      </a></span> <span class="next"><a href="/xstate-docs-cn/guides/guards.html">
        Guarded Transitions
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xstate-docs-cn/assets/js/app.7894ad5b.js" defer></script><script src="/xstate-docs-cn/assets/js/3.224f3587.js" defer></script><script src="/xstate-docs-cn/assets/js/9.4fb7b0c1.js" defer></script><script src="/xstate-docs-cn/assets/js/26.b97ecd3d.js" defer></script><script src="/xstate-docs-cn/assets/js/10.ea2a939d.js" defer></script>
  </body>
</html>
